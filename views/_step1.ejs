<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>布置轴网-备份</title>
	<link rel="stylesheet" href="/stylesheets/bootstrap.min.css">
	<link rel="stylesheet" href="/stylesheets/style.css">
</head>
<body>
	<div class="container">
		<div class="row">
			<div class="col-md-10 col-md-offset-1">
				<div class="panel panel-primary">
			      <div class="panel-heading">
			        <h3 class="panel-title">创建轴网</h3>
			      </div>
			      <div class="panel-body box-wrap">
			         	<div class="row">
			         		<div class="col-md-4">
								<div class="item_1 item_border">
									轴网预览
								</div>
								<div class="item_select_1">
									<span>插入基点&nbsp;</span>
									<select name="" id=""  class="form-control input-sm">
										<option value="">左下</option>
										<option value="">右下</option>
									</select>
								</div>
								<div class="item_select_1">
									<span>旋转角度&nbsp;</span>
									<select name="" id="" class="form-control input-sm">
										<option value="">0</option>
										<option value="">90</option>
									</select>
								</div>
							</div>
							<div class="col-md-4">
								<div class="item_2 item_border" id="horizontal_line_hook">

									<div class="flex_center">
										<h4>水平线</h4>
										<button class="btn btn-default btn-xs" @click="addSubmit">新增间隔</button>
									</div>
									<div class="row item_2_height">
										<div class="col-md-6 flex_around">
											<div class="table-height">
												<table class="table table-bordered">
													  <col class="col-xs-6">
													  <col class="col-xs-6">
													  <thead>
													  	<tr>
													    <td>间隔</td>
													    <td>个数</td>
													  </tr>
													  </thead>
												  	<tbody>
													  	<tr v-for="list in arrObj" v-cloak >
														    <td><input style="width:50px;"  v-model="list.temp" ></td>
														    <td><input style="width:50px;"  v-model="list.count"></td>
														</tr>
												  </tbody>
												</table>
											</div>
											

											<div class="item_radio">
												<div class="radio">
												  <label>
												    <input type="radio" name="optionsRadios" id="optionsRadios1" value="up"  checked="" v-model="type" checked>
												   上开
												  </label>
												  <label>
												    <input type="radio" name="optionsRadios" id="optionsRadios2" value="down" v-model="type">
												   下开
												  </label>
												</div>
											</div>
										</div>
										<div class="col-md-6">
											<div class="item_2_lists">
												<select multiple style="width: 100%" v-model="selected"  class="form-control ">
												    <option v-for="option in options" @click="clickItems" v-cloak>
												    	{{option.value}}
												    </option>
												  
												  </select>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-12">
											<div class="p-5">
												<p>输入</p>
												<textarea name="" id=""  rows="4" class="form-control"  @change="changeArea" v-model="textarea"></textarea>
											</div>
											
										</div>
									</div>
								</div>
							</div>
							<div class="col-md-4">
								<div class="item_2 item_border" id="vertical_line_hook">
									<div class="flex_center">
										<h4>垂直线</h4>
										<button class="btn btn-default btn-xs" @click="addSubmit">新增间隔</button>
									</div>
									<div class="row item_2_height">
										<div class="col-md-6 flex_around">
											<div class="table-height">
												<table class="table table-bordered">
													  <col class="col-xs-6">
													  <col class="col-xs-6">
													  <thead>
													  	<tr>
													    <td>间隔</td>
													    <td>个数</td>
													  </tr>
													  </thead>
												  	<tbody>
													  	<tr v-for="list in arrObj" v-cloak >
														    <td><input style="width:50px;"  v-model="list.temp" ></td>
														    <td><input style="width:50px;"  v-model="list.count"></td>
														</tr>
												  </tbody>
												</table>
											</div>

											<div class="item_radio">
												<div class="radio">
												  <label>
												    <input type="radio" name="options" id="options1" value="option1" checked >
												   左进
												  </label>
												  <label>
												    <input type="radio" name="options" id="options1" value="option1">
												   右进
												  </label>
												</div>
											</div>
										</div>
										<div class="col-md-6">
											<div class="item_2_lists">
												<select multiple style="width: 100%" v-model="selected" class="form-control ">
												    <option v-for="option in options" @click="clickItems" v-cloak >
												    	{{option.value}}
												    </option>
												  </select>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-12">
											<div class="p-5">
												<p>输入</p>
												<textarea name="" id=""  rows="4"  class="form-control" @change="changeArea" v-model="textarea"></textarea>
											</div>
											
										</div>
									</div>
								</div>
							</div>
			         	</div>
			         	<div class="row box_footer">
							<div class="col-md-12">
								<button class="btn btn-default btn-xs btn-bim pull-right ml-30">取消</button>
								<button class="btn btn-primary btn-xs btn-bim pull-right">插入</button>
								
							</div>
						</div>
			      </div>
			    </div>
			</div>
		</div>
	</div>

	<script src="/javascripts/vue.js"></script>
	<script src="/javascripts/vue-resource.min.js"></script>
	<script>

		new Vue({
			el:'#horizontal_line_hook',
			data:{
				options:[
					{value:1000},
					{value:1200},
					{value:1400},
					{value:1600}
				],
				selected:'',
				arrObj:[],
				textarea:'',
				type:-1
			},
			methods:{
				clickItems() {
				},
				addSubmit() {
					if(this.selected != '' && this.selected.length == 1){
						this.arrObj.push({temp:this.selected,count:1});
					}
					
					else{
						alert("请选择一个间隔")
					}
				},
				changeArea(){
					console.log('change')
					if(this.textarea == ''){
						this.textarea = []
					}
					else {
						var that = this;
						var obj = this.textarea.split(' ');
						that.arrObj = [];
						obj.forEach(function(e,i){
							that.arrObj.push({temp:e.split('*')[0],count:e.split('*')[1]});

						})

					}
					
				}
			},
			watch:{
				arrObj:{
					handler:function(val,oldVal) {
						this.textarea = val;
						var that = this;
						var obj = [];
						this.textarea.forEach(function(e,i){
							if(e.temp !='' && e.count != '') {
								obj.push(e.temp+'*'+e.count)
							}
							// else{
							// 	alert('请输入正确格式:a*b,每组间用空格隔开')

							// }
						})
						// console.log(obj.join(' '))
						this.textarea = obj.join(' ');
						
					},
					deep:true
				}
			}
		
		})


		new Vue({
			el:'#vertical_line_hook',
			data:{
				options:[
					{value:1000},
					{value:1200},
					{value:1400},
					{value:1600}
				],
				selected:'',
				arrObj:[],
				textarea:''
			},
			methods:{
				clickItems() {
				},
				addSubmit() {
					if(this.selected != '' && this.selected.length == 1){
						this.arrObj.push({temp:this.selected,count:1});
					}
					
					else{
						alert("请选择一个间隔")
					}
				},
				changeArea(){
					console.log('change')
					var that = this;
					var obj = this.textarea.split(' ');
					that.arrObj = [];
					obj.forEach(function(e,i){
						that.arrObj.push({temp:e.split('x')[0],count:e.split('x')[1]});
					})
				}
			},
			watch:{
				arrObj:{
					handler:function(val,oldVal) {
						this.textarea = val;
						var that = this;
						var obj = [];
						this.textarea.forEach(function(e,i){
							if(e.temp !='' && e.count != '') {
								obj.push(e.temp+'*'+e.count)
							}
							// else{
							// 	alert('请输入正确格式:a*b,每组间用空格隔开')

							// }
						})
						// console.log(obj.join(' '))
						this.textarea = obj.join(' ');
						
					},
					deep:true
				}
			}
		
		})
	</script>
</body>
</html>